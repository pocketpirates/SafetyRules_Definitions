import React, { useMemo, useState, useEffect } from "react";

// Hash router helper
function useHash(defaultHash = "home") {
  const [hash, setHash] = useState(() => (window.location.hash || `#${defaultHash}`).slice(1));
  useEffect(() => {
    function onChange() { setHash((window.location.hash || `#${defaultHash}`).slice(1)); }
    window.addEventListener("hashchange", onChange);
    if (!window.location.hash) window.location.hash = `#${defaultHash}`;
    return () => window.removeEventListener("hashchange", onChange);
  }, [defaultHash]);
  const go = (h) => (window.location.hash = `#${h}`);
  return [hash, go];
}

// ----------------- PART D: Definitions data & helpers -----------------
const DEFINITIONS = [
  { term: "Acceptor", def: "A person who has been nominated by the Location Plant Manager to provide Supervision to the members of a Working Party and to accept, surrender and clear specified Safety Documents." },
  { term: "Apparatus", def: "All equipment, in which electrical conductors are used, supported, or of which they may form a part, and for which Indaver/Rivenhall IWMF has a maintenance responsibility." },
  { term: "Appointed Person", def: "A person nominated by the Location Plant Manager to carry out specified duties relating to Safety from the System." },
  { term: "Approved", def: "Authorised or sanctioned by Rivenhall IWMF Location Plant Manager." },
  { term: "Card Safe", def: "A device of an Approved type for the secure retention of Safety Documents." },
  { term: "Card Safe Declaration Form", def: "A Form of declaration to be signed by the Acceptor in charge of an additional Working Party permitted to work under a Card Safe retained Safety Document." },
  { term: "Company", def: "Indaver Rivenhall IWMF" },
  { term: "Danger", def: "A risk to health or bodily injury." },
  { term: "Dead", def: "At or about zero voltage and disconnected from any Live System." },
  { term: "Drained", def: "Where the contents of the Plant and/or Apparatus are adjusted and maintained at a level, which avoids Danger." },
  { term: "Earthed", def: "Connected to earth by means of an Earthing Device." },
  { term: "Drain Earth", def: "A fixed or portable Earthing Device applied for the purpose of protection against induced voltages." },
  { term: "Primary Earth", def: "A fixed or portable Earthing Device applied at a position defined in a Safety Document." },
  { term: "Earthing Device", def: "An Approved means of providing a connection between a conductor and earth." },
  { term: "Earthing Schedule", def: "A schedule indicating the Drain Earth requirements for each stage of work." },
  { term: "General Safety", def: "The provision of safe access to and from the place of work, a safe place to work, safe methods of work, the use of correct work equipment and personal protective equipment." },
  { term: "High Voltage (HV)", def: "A voltage of 1000 Volts and above." },
  { term: "Isolated", def: "Disconnected from associated Plant and/or Apparatus by an Isolating Device in the isolating position, or by adequate physical separation or sufficient gap." },
  { term: "Isolating Device", def: "A device for rendering Plant and/or Apparatus Isolated." },
  { term: "Isolation Schedule", def: "A written record provided by a Safety Controller to an Appointed Person detailing the safety precautions and the order in which they should be applied to provide Safety from the System." },
  { term: "Issuer", def: "A person authorised in writing by the Location Plant Manager to issue and transfer a specified Safety Document." },
  { term: "Key Safe Key", def: "A key unique at the Location capable of operating a lock, other than the control lock, on a Key Safe." },
  { term: "Control Key", def: "A key issued solely to Safety Controllers to operate the control lock of a Key Safe." },
  { term: "Safety Key", def: "A key unique at the Location, capable of operating a Safety Lock which will secure Isolations, vents or drains." },
  { term: "Key Safe", def: "A device of an Approved type for the secure retention of keys." },
  { term: "Live", def: "Electrically charged." },
  { term: "Location", def: "Any place at which work under the company’s safety rules is carried out." },
  { term: "Locked", def: "A condition of Plant and/or Apparatus that cannot be altered without the operation of a locking device which is of a standard acceptable to the Location Plant Manager." },
  { term: "Low Voltage (LV)", def: "A voltage above 50 Volts and below 1000 Volts." },
  { term: "Control Lock", def: "A lock on a Key Safe or a Card Safe to which only Safety Controllers have a key." },
  { term: "Personal Lock", def: "A lock unique at the Location issued to an Acceptor for securing Safety Documents within a Card Safe." },
  { term: "Safety Lock", def: "An Approved device for securing Points of Isolation, and where appropriate, certain vents or drains." },
  { term: "Masculine words", def: "Masculine words used in these Rules (he, his, him) shall also be understood to mean the feminine where the sense requires it." },
  { term: "Personally Retained", def: "A method for the safe custody of a Safety Document by an Acceptor." },
  { term: "Plant Controller", def: "A person authorised in writing by the Location Plant Manager, responsible for the release of Plant and/or Apparatus and coordinating safety at interfaces with other Companies." },
  { term: "Plant", def: "Fixed and movable items other than Apparatus, for which Indaver, Rivenhall IWMF has a responsibility." },
  { term: "Point(s) of Isolation", def: "The point(s) at which equipment has been Isolated and where reasonably practicable immobilised and locked. Safety Tags shall be attached at all Points of Isolation." },
  { term: "Purged", def: "A condition of Plant and/or Apparatus from which any dangerous contents have been removed." },
  { term: "Safety Controller", def: "A person authorised in writing by the Location Plant Manager, to ensure adequate precautions are taken to provide Safety from the System, including preparation and cancellation of specified Safety Documents." },
  { term: "Safety Distance", def: "The distance from the nearest High Voltage exposed conductor not Earthed, or from an insulator supporting a High Voltage conductor, which shall be maintained to avoid Danger." },
  { term: "Safety Document", def: "A formal document: Limited Work Certificate, Permit for Work, Permit ROS, or Sanction for Operation & Testing." },
  { term: "Safety from the System", def: "That condition which safeguards persons working on or testing Plant and/or Apparatus from the Dangers inherent in the System." },
  { term: "Safety Tag", def: "An Approved means of identifying locally the point of application of safety precautions." },
  { term: "Immediate Supervision", def: "Supervision by a person continually available at the Location when work/testing is in progress, attending as often as necessary to ensure safety." },
  { term: "Personal Supervision", def: "Supervision by the supervising person who is present at the work location observing the work process and able to intervene." },
  { term: "System", def: "Items of Plant and/or Apparatus used separately or in combination in any process associated with the generation, transmission, or distribution of electricity." },
  { term: "Vented", def: "Where the contents of the Plant and/or Apparatus are adjusted and maintained at atmospheric pressure." },
  { term: "Voltage – HV", def: "≥ 1000 Volts." },
  { term: "Voltage – LV", def: "50–1000 Volts." },
  { term: "Voltage – ELV", def: "< 50 Volts." },
  { term: "Working Party", def: "Persons working under the Supervision of an Acceptor including an Acceptor working alone." },
  { term: "Multiple Working Party Safety Document", def: "Safety Document format allowing one or more working parties to work at the same time under the same document (Limited Work Certificate or Permit for Work only)." },
  { term: "Single Working Party Safety Document", def: "Safety Document format allowing only one working party to carry out work at any one time." },
];
const byTerm = (a, b) => a.term.localeCompare(b.term);

function useFiltered(list, query) {
  return useMemo(() => {
    if (!query) return list;
    const q = query.toLowerCase();
    return list.filter(
      (x) => x.term.toLowerCase().includes(q) || x.def.toLowerCase().includes(q)
    );
  }, [list, query]);
}

// ----------------- TEXT: Foreword & Parts A/B/C/E (verbatim; formatted) -----------------
const FOREWORD = `Rivenhall IWMF Safety Rules are provided to ensure that work can be undertaken without hazard from Electrical or Mechanical Equipment.

The Safety Rules are mandatory for work at Rivenhall IWMF. It is the duty of every person who may be concerned with work on the system to make themselves thoroughly familiar with the Safety Rules and supporting documents appropriate to the activity that they are undertaking. In addition, all persons have a general duty to be conversant with and to observe statutory requirements relating to any activities to which they have an involvement.

Work should never be considered to be so urgent or important that time cannot be taken to plan it properly and perform it safely.

The issue of a safety document does not, in itself, make a job safe. The achievement of safety from all inherent dangers also depends on full and logical preparation of work. This includes:

• Identifying and assessing all reasonably foreseeable risks thereby implementing control measures to reduce the significant risks to a level, which as a minimum satisfies all current legislative requirements and even more importantly is acceptable to persons performing the task.

• Executing the work in a safe manner by suitably competent personnel.

The risk assessment for the task identifies the risks associated with carrying out the work and also the risks inherent in the system in its operational state. These rules, associated procedures and instructions therefore define the control measures necessary to reduce these system risks to an acceptable level.

If, whether intentionally or through neglect or carelessness, a person fails to observe the Safety Rules and supporting documents, or unnecessarily endangers the personal safety of either themselves or others, then, in the case of an employee, that employee will be subject to disciplinary action under the Company’s Disciplinary Policy or, in any other case, that person will be subject to such action as the Company may consider appropriate in the circumstances.`;

const PART_A = `PART A - GENERAL PROVISIONS

1. INTERPRETATION

1.1. SHALL
When “shall” is used in these Safety Rules or associated procedures with no qualification, this indicates a mandatory requirement with no discretion permitted and no judgement to be made.

1.2. SHALL, WHERE PRACTICABLE
When “shall, where practicable” is used to qualify a requirement, a slightly less strict standard is imposed. It means that where it is possible to achieve in the light of current knowledge and invention, bearing in mind the hazards associated with work to be undertaken, then the requirement shall be met. One is not allowed to avoid the requirement on the grounds of difficulty, inconvenience or cost.

1.3. SHALL, WHERE REASONABLY PRACTICABLE
When “shall, where reasonably practicable” is used to qualify a requirement then a judgement must be made as to what is reasonable, taking into account the magnitude of the risk on the one hand and the cost, time and trouble, or effort necessary for averting the risk on the other hand.

1.4. WORK
When used in these Safety Rules, the term “work” may include testing.

2. GENERAL REQUIREMENTS
2.1. All persons with responsibilities under these Safety Rules must possess sufficient knowledge and/or experience to avoid Danger. They must have received training for the roles that they are to perform under the Safety Rules.

2.2. Any person receiving instructions in the application of these Safety Rules shall report to the person giving those instructions any objections on safety grounds to carrying them out. Any such objections shall be dealt with in accordance with an Approved written procedure.

2.3. If a hazard arises or is suspected during the course of work, which could give rise to Danger, the work shall cease, the situation shall be reported immediately to the Safety Controller and all persons withdrawn from the Plant and/or Apparatus concerned.

2.4. In addition to these Safety Rules, other associated policies, procedures and instructions issued by Rivenhall IWMF, or other authorities shall be complied with.

3. GENERAL SAFETY
3.1. In addition to the requirements for establishing Safety from the System specified in these rules, General Safety must be established and maintained at all times at and in the vicinity of the place of work. Supervisors must ensure that General Safety is established, monitored and maintained. During the course of the work members of the Working Party must maintain General Safety and ensure other work areas are not adversely affected by their activities.

3.2. The discharging of responsibility for General Safety will be achieved as part of the normal pattern of management delegation and control by ensuring that all activities are in accordance with appropriate instructions & guidance.

3.3. When a requirement for work is identified, it is fundamental that prior to work commencing the hazards present shall be recognised, the risks assessed and the necessary control measures implemented to reduce any risk to an acceptable level.

4. EXCEPTIONAL CIRCUMSTANCES
4.1. Work on Plant and/or Apparatus, which is part of the System and to which these Safety Rules cannot be applied, or for specific, exceptional circumstances should not be applied, shall be carried out in accordance with an Approved written procedure.`;

const PART_B = `PART B - THE BASIC SAFETY RULES

1. APPLICATION OF THE RULES
1.1. These Safety Rules shall be applied to all Plant and Apparatus, which form part of the System.
1.2. Any Plant and/or Apparatus not considered to be part of the System, to which these Safety Rules therefore do not apply, shall be identified in an Approved written procedure and an alternative safe system of work shall be provided.
1.3. Plant and Apparatus shall be added to and removed from the System only in accordance with an Approved written procedure, which shall determine the time when these Safety Rules are to be applied to new equipment and cease to apply to equipment removed. The Approved written procedure may include provision for equipment temporarily disconnected and removed from the normal service position to workshops or work area to be considered as temporarily removed from the System.

2. APPROACH TO EXPOSED HIGH VOLTAGE CONDUCTORS AND /OR INSULATORS
2.1. Persons shall not allow any part of their body to approach exposed conductors designed for, and operated at, High Voltage, or insulators supporting such conductors, within the Safety Distances specified in 2.4, unless the conductors have been Isolated and Danger has been excluded.
2.2. When exposed High Voltage conductors are not Isolated, the only objects permitted to approach them, or insulators supporting them, within the Safety Distances specified in 2.4, shall be Approved insulated devices.
2.3. When exposed conductors are Isolated but could be subject to High Voltage, the only objects, which shall be caused to approach them, or insulators supporting them, within the Safety Distances specified in 2.4, shall be Approved voltage measuring devices or Earthing Devices.
2.4. A distance of 300mm (12”) shall also be maintained from that portion of the insulators supporting exposed High Voltage conductors, which is outside the appropriate Safety Distance from the conductors.

3. SAFETY PRECAUTIONS FOR WORK ON OR ADJACENT TO PLANT AND/OR HIGH VOLTAGE APPARATUS
3.1. When work is to be carried out on or adjacent to Plant and/or H.V. Apparatus and the means of achieving Safety from the System is by limiting the work or the work area, written instructions clearly defining the limits shall be given. When it is considered necessary a Limited Work Certificate shall be issued.
3.2. When limiting the work or the work area is insufficient to achieve Safety from the System, it shall be achieved by the application of the following requirements: - (3.2.1–3.2.12 as per document).
3.3. When work is to be carried out on Plant and/or H.V. Apparatus, and it is essential to restore supplies for certain work during the period that the Safety Document is in force, additional precautions shall be applied, including an Approved procedure and a Permit for Work ROS. No other Safety Document shall be in force on the same items.
3.4. When testing is to be carried out on Plant and/or H.V. Apparatus, testing supplies may be restored and/or Primary Earths removed when necessary under a Sanction for Operation and Testing; the Acceptor has explicit responsibilities (3.4.7).

4. SAFETY PRECAUTIONS FOR WORK ON LOW VOLTAGE APPARATUS
4.1–4.4. LV work should be Dead wherever reasonably practicable; isolate, lock off, tag, and work under a Permit. If not reasonable, an Approved procedure and a Safety Document are required. ELV may proceed with local isolation at Safety Controller discretion.

5. OPERATION OF PLANT AND APPARATUS
5.1. Operation to achieve Safety from the System shall never involve pre‑arranged signals or time intervals.

6. DEMARCATION OF WORK AREAS
6.1. Work area shall be clearly defined and physically protected where necessary.

7. IDENTIFICATION OF PLANT & APPARATUS
7.1. Work shall only be permitted on Plant/Apparatus which is readily identifiable; Acceptors must confirm correct identification.`;

const PART_C = `PART C - SAFETY DOCUMENT PROCEDURES

1. SAFETY PROCEDURES LOCAL INSTRUCTION
1.1. The manner in which safety procedures are to be applied shall be specified in either a Rivenhall IWMF Group Policy Document or a Site Management Instruction.

2. SAFETY DOCUMENTS
2.1. Limited Work Certificate; Permit for Work; Permit for Work ROS; Sanction for Operation and Testing.

3. METHODS OF USE
3.1. Safety Documents shall only be issued to Acceptors who are authorised to accept them.

4. SAFETY PRECAUTIONS
4.1–4.7. Preparation, release from service, advice, signing of precautions, key custody, joint control of keys, and document preparation by Safety Controller.

5–8. PREPARATION DETAILS
5. Permit for Work: identification, description, precautions, further precautions, issued items, signature/date/time.
6. Permit ROS: as above plus which precautions may be varied and keys/procedure for restoration.
7. Sanction for Operation & Testing: as above including removable Primary Earths and test procedure/keys.
8. Limited Work Certificate: work location, description, limits, items issued, signature/date/time.

9–13. ISSUE / TRANSFER / CLEARANCE / CANCELLATION / CATEGORIES
9. Issue by Issuer; ROS & Sanction only by Safety Controller who is also an Issuer.
10. Transfer rules including face‑to‑face preference and restoration to original state if not practicable.
11. Clearance responsibilities of Acceptor.
12. Cancellation actions of Safety Controller.
13. Categories: Plant Controller; Safety Controller; Issuer; Appointed Person; Acceptor.`;

const PART_E = `PART E - FORM OF SAFETY DOCUMENTS

Standardised forms for: Limited Work Certificate, Permit for Work, Permit for Work ROS, Sanction for Operation & Testing.`;

// ----------------- Simple styled wrappers -----------------
const Page = ({ title, children, actions }) => (
  <div className="min-h-screen bg-slate-50 text-slate-900">
    <header className="sticky top-0 z-10 bg-white/80 backdrop-blur border-b border-slate-200">
      <div className="max-w-5xl mx-auto px-4 py-4 flex items-center gap-3">
        <div className="w-10 h-10 rounded-2xl bg-slate-900 text-white grid place-items-center font-bold">I</div>
        <div className="flex-1">
          <h1 className="text-xl font-semibold">{title}</h1>
          <p className="text-sm text-slate-500">Rivenhall IWMF Safety Rules</p>
        </div>
        {actions}
      </div>
    </header>
    <main className="max-w-5xl mx-auto p-4">{children}</main>
    <footer className="max-w-5xl mx-auto px-4 pb-10 text-xs text-slate-500">
      <hr className="my-6 border-slate-200" />
      Built for study • Foreword & Parts A/B/C/E are verbatim and re‑formatted; Part D includes index/quick/flashcards.
    </footer>
  </div>
);

const Card = ({ children }) => (
  <section className="bg-white rounded-2xl shadow-sm border border-slate-200 p-4 md:p-6 mb-4">{children}</section>
);

const ParaBlock = ({ text }) => (
  <div className="prose prose-slate max-w-none whitespace-pre-wrap leading-relaxed">{text}</div>
);

// ----------------- Part D views -----------------
function IndexView({ list }) {
  const groups = useMemo(() => {
    const g = {};
    for (const item of list) {
      const k = item.term[0].toUpperCase();
      (g[k] = g[k] || []).push(item);
    }
    for (const k in g) g[k].sort(byTerm);
    return Object.entries(g).sort((a, b) => a[0].localeCompare(b[0]));
  }, [list]);

  const [sel, setSel] = useState(null);

  return (
    <div className="grid md:grid-cols-3 gap-4">
      <Card>
        <h2 className="text-lg font-semibold mb-2">A–Z Index</h2>
        <div className="space-y-3 max-h-[70vh] overflow-auto pr-1">
          {groups.map(([letter, items]) => (
            <div key={letter}>
              <div className="text-xs font-semibold text-slate-500 mb-1">{letter}</div>
              <ul className="divide-y divide-slate-100 border border-slate-200 rounded-xl overflow-hidden">
                {items.map((x) => (
                  <li key={x.term}>
                    <button
                      onClick={() => setSel(x)}
                      className="w-full text-left px-3 py-2 hover:bg-slate-50"
                    >
                      <div className="font-medium break-words">{x.term}</div>
                      <div className="text-xs text-slate-500 break-words">{x.def}</div>
                    </button>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </Card>

      <div className="md:col-span-2">
        <Card>
          <div className="flex items-center justify-between gap-3 mb-3">
            <h2 className="text-lg font-semibold">{sel ? sel.term : "Select a term"}</h2>
            {sel && (
              <button
                onClick={() => navigator.clipboard.writeText(`${sel.term}: ${sel.def}`)}
                className="text-xs px-3 py-1.5 rounded-lg border border-slate-300 hover:bg-slate-50"
              >Copy</button>
            )}
          </div>
          {sel ? (
            <p className="text-slate-700 break-words">{sel.def}</p>
          ) : (
            <p className="text-slate-500">Pick a term from the left to view the full definition.</p>
          )}
        </Card>
      </div>
    </div>
  );
}

function QuickView({ list }) {
  return (
    <Card>
      <h2 className="text-lg font-semibold mb-2">Quick Reference (all definitions)</h2>
      <div className="grid md:grid-cols-2 gap-3 max-h-[70vh] overflow-auto pr-1">
        {list.map((x) => (
          <div key={x.term} className="border border-slate-200 rounded-xl p-3 bg-white">
            <div className="font-semibold break-words">{x.term}</div>
            <div className="text-sm text-slate-700 break-words">{x.def}</div>
          </div>
        ))}
      </div>
    </Card>
  );
}

function FlashView() {
  const [currentIdx, setCurrentIdx] = useState(() => Math.floor(Math.random() * DEFINITIONS.length));
  const [revealed, setRevealed] = useState(false);
  function nextRandom() {
    let n = Math.floor(Math.random() * DEFINITIONS.length);
    if (n === currentIdx) n = (n + 1) % DEFINITIONS.length;
    setCurrentIdx(n);
    setRevealed(false);
  }
  const current = DEFINITIONS[currentIdx];
  return (
    <div className="max-w-2xl mx-auto">
      <Card>
        <div className="rounded-2xl border border-slate-300 bg-white p-6">
          <div className="text-xs uppercase tracking-wide text-slate-500 mb-2">Term</div>
          <div className="text-2xl font-bold break-words">{current.term}</div>
          {revealed ? (
            <div className="mt-4 pt-4 border-t border-slate-200">
              <div className="text-xs uppercase tracking-wide text-slate-500 mb-1">Definition</div>
              <div className="text-lg leading-relaxed break-words">{current.def}</div>
            </div>
          ) : (
            <button onClick={() => setRevealed(true)} className="mt-6 w-full rounded-xl border border-slate-300 py-2 hover:bg-slate-50">Reveal</button>
          )}
        </div>
        <div className="flex items-center justify-between mt-3 text-sm text-slate-600">
          <span>Tip: press Next for a new random term.</span>
          <button onClick={nextRandom} className="underline underline-offset-4">Next →</button>
        </div>
      </Card>
    </div>
  );
}

function PartD() {
  const [tab, setTab] = useState("index");
  const [query, setQuery] = useState("");
  const filtered = useFiltered([...DEFINITIONS].sort(byTerm), query);
  return (
    <Page
      title="Part D — Definitions"
      actions={
        <nav className="flex gap-2">
          {[{ id: "index", label: "Index" }, { id: "quick", label: "Quick Reference" }, { id: "flash", label: "Flashcards" }].map((t) => (
            <button
              key={t.id}
              onClick={() => setTab(t.id)}
              className={
                "px-3 py-2 rounded-xl text-sm font-medium border " +
                (tab === t.id ? "bg-slate-900 text-white border-slate-900" : "bg-white text-slate-700 border-slate-200 hover:bg-slate-100")
              }
            >
              {t.label}
            </button>
          ))}
        </nav>
      }
    >
      {tab !== "flash" && (
        <div className="bg-white border border-slate-200 rounded-2xl p-3 mb-4">
          <input
            type="text"
            value={query}
            onChange={(e) => setQuery(e.target.value)}
            className="w-full rounded-xl border border-slate-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-slate-400"
            placeholder="Search terms or definitions…"
          />
        </div>
      )}
      {tab === "index" && <IndexView list={filtered} />}
      {tab === "quick" && <QuickView list={filtered} />}
      {tab === "flash" && <FlashView />}
    </Page>
  );
}

// ----------------- Pages -----------------
function Home({ go }) {
  const Link = ({ to, children }) => (
    <button onClick={() => go(to)} className="px-4 py-3 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 w-full text-left">
      <div className="text-base font-semibold">{children}</div>
      <div className="text-xs text-slate-500">Open section</div>
    </button>
  );
  return (
    <Page title="Home">
      <Card>
        <h2 className="text-lg font-semibold mb-2">Sections</h2>
        <div className="grid md:grid-cols-2 gap-3">
          <Link to="foreword">Foreword</Link>
          <Link to="part-a">Part A — General Provisions</Link>
          <Link to="part-b">Part B — Basic Safety Rules</Link>
          <Link to="part-c">Part C — Safety Document Procedures</Link>
          <Link to="part-d">Part D — Definitions</Link>
          <Link to="part-e">Part E — Forms of Safety Documents</Link>
        </div>
      </Card>
    </Page>
  );
}

function TextPage({ title, text }) {
  return (
    <Page title={title} actions={<button onClick={() => (window.location.hash = "#home")} className="px-3 py-2 rounded-xl text-sm border border-slate-200">Home</button>}>
      <Card>
        <ParaBlock text={text} />
      </Card>
    </Page>
  );
}

// ----------------- App (router) -----------------
export default function App() {
  const [hash, go] = useHash("home");
  if (hash === "home") return <Home go={go} />;
  if (hash === "foreword") return <TextPage title="Foreword" text={FOREWORD} />;
  if (hash === "part-a") return <TextPage title="Part A — General Provisions" text={PART_A} />;
  if (hash === "part-b") return <TextPage title="Part B — Basic Safety Rules" text={PART_B} />;
  if (hash === "part-c") return <TextPage title="Part C — Safety Document Procedures" text={PART_C} />;
  if (hash === "part-d") return <PartD />;
  if (hash === "part-e") return <TextPage title="Part E — Forms of Safety Documents" text={PART_E} />;
  return <Home go={go} />;
}
